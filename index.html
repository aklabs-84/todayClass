<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ì˜¤ëŠ˜ì˜ ìˆ˜ì—… ê¸°ë¡</title>

  <!-- Tailwind & html2canvas (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
    .active-menu {
      box-shadow: 0 0 0 2px #2563eb, 0 2px 8px rgba(37,99,235,0.12);
      border: 2px solid #2563eb !important;
      background-color: #e0e7ff !important;
      color: #1e40af !important;
      transition: box-shadow 0.2s, border 0.2s, background 0.2s, color 0.2s;
    }
    body { font-family: 'Inter', sans-serif; }
    .delete-mode .student-item {
      position: relative;
      overflow: visible;
      animation: wiggle 0.6s ease-in-out infinite alternate;
      cursor: pointer !important;
    }
    .delete-mode .student-item::before {
      content: '';
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: calc(100% + 22px);
      height: calc(100% + 22px);
      border: 2px dashed #ef4444;
      border-radius: 9999px;
      pointer-events: none;
    }
    .delete-badge {
      position: absolute;
      top: -10px; right: -10px;
      background: #ef4444; 
      color: #fff; 
      border-radius: 9999px;
      width: 24px; height: 24px;
      font-size: 16px; 
      font-weight: bold;
      display: none; 
      align-items: center; 
      justify-content: center;
      box-shadow: 0 2px 8px rgba(239,68,68,.4);
      cursor: pointer;
      z-index: 10;
      transition: transform 0.2s, background 0.2s;
    }
    .delete-badge:hover {
      background: #dc2626;
      transform: scale(1.15);
    }
    .delete-mode .delete-badge {
      display: flex !important;
    }
    @keyframes wiggle {
      from { transform: translateY(-2px) rotate(-1.2deg); }
      to   { transform: translateY( 2px) rotate( 1.2deg); }
    }
    .capture-safe #placeholder-message,
    .capture-safe .starter-emoji,
    .capture-safe .delete-badge { display: none !important; }
    .student-item{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      height:48px;
      padding:8px 14px;
      background:#fff;
      border-radius:9999px;
      box-shadow:0 4px 14px rgba(0,0,0,.12);
    }
    .student-item .emoji,
    .student-item .name{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      line-height:1;
    }
    .student-item .emoji{ font-size:22px; }
    .student-item .name{  font-size:14px; font-weight:600; white-space:nowrap; }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <!-- Top Navigation -->
  <nav id="top-nav" class="sticky top-0 z-50 bg-white/90 backdrop-blur border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-3 sm:px-4 md:px-6">
      <div class="h-16 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <span class="text-amber-500 text-2xl">ğŸ“’</span>
          <span class="font-extrabold text-lg sm:text-xl md:text-2xl text-gray-900">ì˜¤ëŠ˜ì˜ ìˆ˜ì—… ê¸°ë¡</span>
        </div>
        <div class="flex items-center gap-2">
          <button id="guide-button" class="px-3 py-2 rounded-lg text-sm font-semibold bg-amber-100 text-amber-700 hover:bg-amber-200">
            ì‚¬ìš©ë°©ë²•
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Layout -->
  <div class="max-w-7xl mx-auto px-3 sm:px-4 md:px-6 py-4 md:py-6">
    <div class="flex flex-col md:flex-row gap-4">
      <!-- Left Panel (Controls) -->
      <div class="md:w-1/3 w-full space-y-4 order-2 md:order-1">
        <!-- School/Class/Date -->
        <div class="bg-white rounded-2xl shadow-sm p-4 sm:p-5">
          <h2 class="text-lg sm:text-xl font-extrabold text-amber-600 mb-3">ê¸°ë³¸ ì •ë³´</h2>
          <div class="grid grid-cols-1 gap-3">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">í•™êµ</label>
              <input id="school-name" type="text" class="w-full rounded-lg border-gray-300 focus:ring-amber-400 focus:border-amber-400 px-4 py-2" placeholder="ì˜ˆ: ì•„í¬ë©ìŠ¤ê³ ë“±í•™êµ"/>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">ë°˜</label>
              <input id="class-name" type="text" class="w-full rounded-lg border-gray-300 focus:ring-amber-400 focus:border-amber-400 px-4 py-2" placeholder="ì˜ˆ: 1-2"/>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">ë‚ ì§œ</label>
              <input id="board-date" type="date" class="w-full rounded-lg border-gray-300 focus:ring-amber-400 focus:border-amber-400 px-4 py-2"/>
            </div>
          </div>
        </div>

        <!-- Add Student -->
        <div class="bg-white rounded-2xl shadow-sm p-4 sm:p-5">
          <h2 class="text-lg sm:text-xl font-extrabold text-amber-600 mb-3">í•™ìƒ ì¶”ê°€</h2>
          <form id="add-student-form" class="flex gap-2">
            <input id="student-name" type="text" class="flex-1 rounded-lg border-gray-300 focus:ring-amber-400 focus:border-amber-400 px-4 py-2" placeholder="í•™ìƒ ì´ë¦„ ì…ë ¥"/>
            <button class="px-4 py-2 rounded-lg bg-amber-500 text-white font-semibold hover:bg-amber-600">ì¶”ê°€</button>
          </form>
          <div class="mt-3 flex flex-wrap gap-2">
            <button id="circular-btn" class="px-3 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 text-sm">ì›í˜• ì •ë ¬</button>
            <button id="grid-btn" class="px-3 py-2 rounded-lg bg-sky-100 text-sky-700 hover:bg-sky-200 text-sm">ê²©ì ì •ë ¬</button>
            <button id="copy-names-btn" class="px-3 py-2 rounded-lg bg-emerald-100 text-emerald-700 hover:bg-emerald-200 text-sm">ì´ë¦„ ë³µì‚¬</button>
            <button id="capture-button" class="px-3 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 text-sm">ìº¡ì²˜ ì €ì¥</button>
            <button id="delete-mode-btn" class="px-3 py-2 rounded-lg bg-rose-100 text-rose-700 hover:bg-rose-200 text-sm">ì‚­ì œ ëª¨ë“œ: OFF</button>
          </div>
        </div>

        <!-- Roster Filter -->
        <div class="bg-white rounded-2xl shadow-sm p-4 sm:p-5">
          <h2 class="text-lg sm:text-xl font-extrabold text-amber-600 mb-3">ì¶œì„ë¶€ ì¡°íšŒ</h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">í•™êµ</label>
              <select id="filter-school" class="w-full rounded-lg border-gray-300 focus:ring-amber-400 focus:border-amber-400 px-3 py-2"></select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">ë‚ ì§œ</label>
              <select id="filter-date" class="w-full rounded-lg border-gray-300 focus:ring-amber-400 focus:border-amber-400 px-3 py-2"></select>
            </div>
            <div class="flex items-end">
              <button id="export-csv" class="w-full px-3 py-2 rounded-lg bg-gray-800 text-white hover:bg-gray-900 text-sm">CSV ë‚´ë³´ë‚´ê¸°</button>
            </div>
          </div>
          <div class="mt-3 flex gap-2">
            <button id="board-btn" class="px-3 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 text-sm">ë³´ë“œ ë³´ê¸°</button>
            <button id="roster-btn" class="px-3 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 text-sm">ì¶œì„ë¶€ ë³´ê¸°</button>
            <button id="delete-selected-btn" class="px-3 py-2 rounded-lg bg-rose-500 text-white hover:bg-rose-600 text-sm">ì„ íƒ ì‚­ì œ</button>
          </div>
        </div>
      </div>

      <!-- Right Panel (Board / Roster) -->
      <div class="relative md:w-2/3 w-full h-[60vh] md:h-[calc(100vh-64px)] overflow-hidden p-0 order-1 md:order-2">
        <!-- Board View -->
        <div id="board-view" class="h-full w-full p-3 sm:p-6 md:p-8">
          <!-- ìº¡ì²˜ ë²”ìœ„ ë˜í¼ -->
          <div id="capture-area" class="relative h-full w-full">
            <div id="student-container" class="relative h-full w-full overflow-hidden touch-none md:rounded-l-3xl rounded-2xl">
              <div id="school-info" class="absolute top-4 sm:top-6 md:top-8 left-4 sm:left-6 md:left-8 text-base sm:text-lg md:text-xl font-bold text-gray-700"></div>
              <div id="placeholder-message" class="absolute inset-0 flex items-center justify-center text-center text-gray-400">
                <div class="p-4">
                  <span class="starter-emoji text-5xl sm:text-6xl mb-4 inline-block">ğŸ˜</span>
                  <p class="text-base sm:text-lg">í•™ìƒ ì•„ì´ì½˜ì´ ì—¬ê¸°ì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Roster View -->
        <div id="roster-view" class="h-full w-full hidden">
          <div class="h-full w-full overflow-auto bg-white md:rounded-l-3xl rounded-2xl">
            <div class="p-4 sm:p-6">
              <h2 class="text-xl sm:text-2xl font-extrabold text-amber-600 mb-3 sm:mb-4">ì¶œì„ë¶€ ê¸°ë¡</h2>
              <div class="overflow-auto rounded-xl border border-gray-200">
                <table class="min-w-full text-sm">
                  <thead class="bg-gray-50">
                    <tr>
                      <th class="px-3 sm:px-4 py-2 text-left font-semibold text-gray-700 whitespace-nowrap">
                        <input id="select-all" type="checkbox"/>
                      </th>
                      <th class="px-3 sm:px-4 py-2 text-left font-semibold text-gray-700 whitespace-nowrap">ë‚ ì§œ</th>
                      <th class="px-3 sm:px-4 py-2 text-left font-semibold text-gray-700 whitespace-nowrap">í•™êµ</th>
                      <th class="px-3 sm:px-4 py-2 text-left font-semibold text-gray-700 whitespace-nowrap">ë°˜</th>
                      <th class="px-3 sm:px-4 py-2 text-left font-semibold text-gray-700 whitespace-nowrap">ì´ë¦„</th>
                      <th class="px-3 sm:px-4 py-2 text-left font-semibold text-gray-700 whitespace-nowrap">ìƒì„±ì‹œê°„</th>
                    </tr>
                  </thead>
                  <tbody id="roster-tbody" class="divide-y divide-gray-100"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
